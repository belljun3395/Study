## Harilog_API

---



사실 2주차 정도에 API 개발이 모두 완료하였다.



그 이후에는 프런트엔드 개발을 기다리면서 Spring 공부를 시작하였다.

Spring을 공부하면서 느끼는 node.js와의 차이는 설계였다.

그렇기에 DB를 다시 살펴보면서 관계를 살펴보였다.

![0304DB](C:\Users\User\Desktop\Study\Study\Harilog_Record\image\0304DB.jpg)



아래 사진은 내가 파악한 DB의 상속관계이다.

뎁스가 크게보면 3층 작개보면 4층으로 볼 수 있을 것 같다.

designer 때문에 위와 같은 생각을 하게 되었다.



사실 Spring에서는 의존성을 많이 만들지 말라고 한 것 같은데 sequelize를 잘 활용하기 위해서는 연관관계가 많은  테이블을 활용하는 것이 좋다고 판단하였다.

왜냐하면 tablename을 통해 sequelize가 만들어주는 메서드를 활용하기 위해서이다.

그 메서드를 활용하려는 이유는 하드코딩을 하지 않기 위해서였다.

이전에 하드코딩을 한 적이 있는데 그 당시 느꼈던 것은 이후 유지보수가 어렵다는 것이다.



그리고 API가 마무리되었기 때문에 프런트엔드와 통신을 조금씩 시작하기도 하였다.

이때 발생한 이슈는 로그인 관련 이슈이다.



passport의 local 전략은 요청을 받았을 때, 요청에 유저에 대한 정보를 기록한다.

그렇기에 API 방식으로 로그인을 구현한다면 로그인을 할 수 없게 된다.

왜냐하면 로그인을 요청하는 서버와 프론트 서버가 다르기 때문이다.

local 전략은 API 서버의 요청에 유저에 대한 정보를 기록한다.

프런트 서버에 기록하는 것이 아니다.

그렇기에 프런트가 로그인이 되었는지 알 수 없다.



그렇다면 로그인을 하려면 어떻게 하면될까?

JWT와 같은 토큰을 API 서버에서 프런트 서버에 전달하고 프런트 서버가 API 서버에 요청을 할 때마다 토큰을 확인 받으면 된다.



이번에는 프로젝트 진행사항을 보면 더이상 변화를 가지면 부담을 가질 수 있기 때문에 로그인을 API와 프런트 서버를 같이 띄어 local 전략을 활용하여 구현하기로 하였다.

그래서 다음에 로그인을 한다면 JWT 토큰을 활용하여 로그인을 구현해 볼 생각이다.

